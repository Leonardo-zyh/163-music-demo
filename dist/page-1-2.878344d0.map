{"version":3,"sources":["js\\index\\page-1-2.js"],"names":["view","el","template","init","$el","$","render","data","songs","map","song","$li","replace","name","singer","id","find","append","model","query","AV","Query","then","Object","assign","attributes","controller","console","log"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;AACI,QAAIA,OAAO;AACPC,YAAI,eADG;AAEPC,ykBAFO;;AAoBPC,YApBO,kBAoBA;AACH,iBAAKC,GAAL,GAAWC,EAAE,KAAKJ,EAAP,CAAX;AACH,SAtBM;AAuBPK,cAvBO,kBAuBAC,IAvBA,EAuBM;AAAA;;AAAA,gBACHC,KADG,GACOD,IADP,CACHC,KADG;;AAETA,kBAAMC,GAAN,CAAU,UAACC,IAAD,EAAU;AAChB,oBAAIC,MAAMN,EAAE,MAAKH,QAAL,CACPU,OADO,CACC,aADD,EACgBF,KAAKG,IADrB,EAEPD,OAFO,CAEC,eAFD,EAEkBF,KAAKI,MAFvB,EAGPF,OAHO,CAGC,WAHD,EAGcF,KAAKK,EAHnB,CAAF,CAAV;AAKA,sBAAKX,GAAL,CAASY,IAAT,CAAc,SAAd,EAAyBC,MAAzB,CAAgCN,GAAhC;AACH,aAPD;AASH;AAlCM,KAAX;AAoCA,QAAIO,QAAQ;AACRX,cAAM;AACFC,mBAAO;AADL,SADE;AAIRQ,YAJQ,kBAID;AAAA;;AAAK;AACR,gBAAIG,QAAQ,IAAIC,GAAGC,KAAP,CAAa,MAAb,CAAZ;AACA,mBAAOF,MAAMH,IAAN,GAAaM,IAAb,CAAkB,UAACd,KAAD,EAAW;AAChC,uBAAKD,IAAL,CAAUC,KAAV,GAAkBA,MAAMC,GAAN,CAAU,UAACC,IAAD,EAAU;AAClC,2BAAOa,OAAOC,MAAP,CAAe,EAACT,IAAIL,KAAKK,EAAV,EAAf,EAA8BL,KAAKe,UAAnC,CAAP;AACH,iBAFiB,CAAlB;AAGA,uBAAOjB,KAAP;AACH,aALM,CAAP;AAMH;AAZO,KAAZ;AAcA,QAAIkB,aAAa;AACbvB,YADa,kBACN;AAAA;;AACH,iBAAKH,IAAL,GAAYA,IAAZ;AACA,iBAAKA,IAAL,CAAUG,IAAV;AACA,iBAAKe,KAAL,GAAaA,KAAb;AACA,iBAAKA,KAAL,CAAWF,IAAX,GAAkBM,IAAlB,CAAuB,YAAM;AACzBK,wBAAQC,GAAR,CAAY,OAAKV,KAAL,CAAWX,IAAvB;AACA,uBAAKP,IAAL,CAAUM,MAAV,CAAiB,OAAKY,KAAL,CAAWX,IAA5B;AACH,aAHD;;AAKA;AACH;AAXY,KAAjB;;AAcAmB,eAAWvB,IAAX,CAAgBH,IAAhB,EAAsBkB,KAAtB;AAGH","file":"page-1-2.878344d0.map","sourceRoot":"..\\src","sourcesContent":["\r\n{\r\n    let view = {\r\n        el: 'section.songs',\r\n        template:\r\n            `\r\n            <li>\r\n            <h3>{song.name}</h3>\r\n            <p>\r\n                <svg class=\"icon icon-sq\">\r\n                <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#icon-sq\"></use>\r\n                </svg>\r\n                {song.singer}\r\n            </p>\r\n            <a class=\"playButton\" href=\"./song.html?id={song.id}\">\r\n                <svg class=\"icon icon-play\">\r\n                <use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#icon-play\"></use>\r\n                </svg>\r\n            </a>\r\n            </li>\r\n            `\r\n        ,\r\n        init() {\r\n            this.$el = $(this.el)\r\n        },\r\n        render(data) {\r\n            let { songs } = data\r\n            songs.map((song) => {\r\n                let $li = $(this.template\r\n                    .replace('{song.name}', song.name)\r\n                    .replace('{song.singer}', song.singer)\r\n                    .replace('{song.id}', song.id)\r\n                )\r\n                this.$el.find('ol.list').append($li)\r\n            })\r\n\r\n        }\r\n    }\r\n    let model = {\r\n        data: {\r\n            songs: []\r\n        },\r\n        find() {    //获取数据库歌曲信息\r\n            let query = new AV.Query('Song')\r\n            return query.find().then((songs) => {\r\n                this.data.songs = songs.map((song) => {                    \r\n                    return Object.assign( {id: song.id}, song.attributes)\r\n                })\r\n                return songs\r\n            })\r\n        }\r\n    }\r\n    let controller = {\r\n        init() {\r\n            this.view = view\r\n            this.view.init()\r\n            this.model = model\r\n            this.model.find().then(() => {\r\n                console.log(this.model.data);\r\n                this.view.render(this.model.data)\r\n            })\r\n\r\n            //this.bindEvents()\r\n        }\r\n    }\r\n    \r\n    controller.init(view, model)\r\n    \r\n    \r\n}"]}